# Модель прецедентів

**1) Діаграма прецедентів**

@startuml
usecase "<b>UserCreate</b>\nЗареєструватися" as UserCreate
usecase "<b>UserAuth</b>\nУвійти в систему" as UserAuth

actor "Авторизований користувач" as AuthUser
actor "Адміністратор" as Admin
actor "НеАвторизований користувач" as Guest

usecase "<b>DataDownload</b>\nЗавантажити дані" as DataDownload
usecase "<b>DataFilter</b>\nПошук даних з фільтром" as DataFilter
usecase "<b>DataUpload</b>\nВивантажити дані" as DataUpload
usecase "<b>DataSearch</b>\nКонтекстний пошук даних" as DataSearch
usecase "<b>DataDelete</b>\nВидалення даних" as DataDelete

Guest-u-|> AuthUser
AuthUser-u-|> Admin

Guest-r-> UserCreate
Guest-r-> UserAuth

AuthUser-r-> DataDownload
AuthUser-r-> DataFilter
AuthUser-r-> DataUpload
AuthUser-r-> DataSearch

Admin-r-> DataDelete
@enduml


**2) Діграми прецедентів для допустимих взаємодій:**

1. Діаграма взаємодії процесу UserCreate:

@startuml
|Користувач|
    : Користувач починає взаємодію;
    : Користувач натискає кнопку «Створити акаунт»;
    : Користувачу відкривається форма для введення нового логіну та паролю;

|Система|
    : Внесення у лог запис про спробу входу;

    : Система перевіряє правильність формату логіну ;
    note right #ffaaaa
    <b> можливий виняток: UserCreate _EX_WrongLoginFormat – 
        Неправильний формат логіну облікового запису
    end note

    : Система перевіряє правильність формату паролю;
    note right #ffaaaa
    <b> можливий виняток: UserCreate _EX_WrongPasswordFormat -
        Неправильний формат паролю облікового записуу
    end note

    : Система перевіряє, чи не існує вже обліковий запис;
    note right #ffaaaa
    <b> можливий виняток: UserCreate _EX_AccountExists –
        Обліковий запис вже існує
    end note

    : Створення облікового запису;

|Користувач|
    : Отримує звіт про результат обробки запиту;
    : Кінець взаємодії;
    stop;
@enduml

2. Діаграма прецеденту UserAuth

@startuml
|Користувач|
    : Користувач починає взаємодію;
    : Користувач натискає кнопку «Авторизвуватися»;
    : Користувачу відкривається форма для введення логіну та паролю;

|Система|
    : Внесення у лог запис про спробу авторизації;

    : Система перевіряє правильність формату логіну ;
    note right #ffaaaa
    <b> можливий виняток: UserCreate _EX_WrongLoginFormat –
        Неправильний формат логіну облікового запису
    end note

    : Система перевіряє, чи існує вже обліковий запис;
    note right #ffaaaa
    <b> можливий виняток: UserCreate _EX_AccountExists –
        Обліковий запис не існує
    end note

    : Система звіряє заданий пароль та збережений;
    note right #ffaaaa
    <b> можливий виняток: UserAuth _EX_WrongPassword - 
        Неправильний пароль
    end note

|Користувач|
    : Отримує звіт про результат обробки запиту;
    : Кінець взаємодії;
    stop;
@enduml

3. Модель прецеденту DataDownload

@startuml
|Користувач|
    : Користувач починає взаємодію;
    : Користувач натискає кнопку «Завантажити дані»;
    : Користувач вибирає які дані необхідно завантажити;
    : Користувач вибирає тип даних;
    : Користувач натискає кнопку "Завантажити";

|Система|
    : Внесення у лог запис про спробу завантаження;

    : Система перевіряє наявність відкритих даних ;
    note right #ffaaaa
    <b> можливий виняток: DataDownload_EX_NotAvailable  - 
        Дані недоступні
    end note

    : Система перетворює збережені дані у запитаний формат;
    note right #ffaaaa
    <b> можливий виняток: DataDownload_EX_FormatNotAvailable 
        Неможливо перетворити
    end note

    : Система створює новий процес котрий відвантажує клієнтові дані;
    note right #ffaaaa
    <b> можливий виняток: DataDownload_EX_TransferError - 
        Помилка передачі даних
    end note

|Користувач|
    : Користувач чекає до кінця процесу завантежння або перериває його;
|Система|
    : Система ліквідовує допоміжний процес;
|Користувач|
    : Кінець взаємодії;
    stop;
@enduml

4. Модель прецеденту DataFilter

@startuml
|Користувач|
    : Користувач починає взаємодію;
    : Користувач вказує, за якою умовою він хоче відфільтрувати дані;
    : Користувач натискає певну кнопку для виводу відфільтрованих даних\ для відміни;

|Система|
    : Система вносить у лог запис про спробу фільтрації даних;

    : Система перевіряє синтаксис запиту до відкритих даних;
    note right #ffaaaa
    <b> можливий виняток: DataFilter_EX_WrongRequest –
        Неправильний формат запиту
    end note

    : Система фільтрує дані та зберігає їх у буфері;
    note right #ffaaaa
    <b> можливий виняток: DataFilter_EX_NoMemory –
        недостатньо ресурсів для зберігання проміжного результату
    end note

    : Система створює ресурс для завантаження даних;

|Користувач|
    : Користувач отримує список з отриманих
відфільтрованих даних (можливо порожній)
Також має опцію завантажити результат;

    : Кінець взаємодії;
    stop;
@enduml

5. Модель прецеденту DataSearch

@startuml
|Користувач|
    : Користувач починає взаємодію;
    : Користувач вводить пошуковий запит;
    : Користувач натискає на кнопку/іконку "Пошук";

|Система|
    : Система вносить у лог запис про спробу пошуку даних;

    : Система перевіряє формат запиту;
    note right #ffaaaa
    <b> можливий виняток: DataFilter_EX_WrongRequest –
        Неправильний формат запиту
    end note

    : Система фільтрує дані та зберігає їх у буфері;
    note right #ffaaaa
    <b> можливий виняток: DataSearch_EX_InvalidQueryd –
Неправильний формат запиту
    end note

    : Система створює допоміжний процес, котрий починає контекстний пошук
(пошук по вмісту) і поступово знаходить результати;
    note right #ffaaaa
    <b> можливий виняток: DataSearch_EX_Timeout –
стік максимальний час очікування
    end note

|Користувач|
    : Користувач поступово отримує результати пошуку від допоміжного процесу;
    : Користувач чекає кінця пошуку або перериває процес;
    : Кінець взаємодії;
    stop;
@enduml

6. Модель прецеденту DataUpload

@startuml
|Користувач|
    : Користувач починає взаємодію;
    : Користувач натискає кнопку «Вивантажити дані»;
    : Користувач отримує модальне вікно з формою для вивантаження;
    : Користувач проєкту вибирає дані для вивантаження;

|Система|
    : Внесення у лог запис про спробу вивантаження;

    : Система перевіряє формат даних;
    note right #ffaaaa
    <b> можливий виняток: DataUpload_EX_FormatNotSupported – 
Неправильний формат даних
    end note

    : Система перевіряє розмір даних;
    note right #ffaaaa
    <b> можливий виняток: DataUpload_EX_SizeExceedsLimit –
об'єм даних перевищує допустимий
    end note

    : Система починає процес завантаження;

|Користувач|
    : Система повертає користувачеві звіт про результат обробки запиту;
    : Кінець взаємодії;
    stop;
@enduml

7. Модель прецеденту DataDelete

@startuml
|Користувач|
    : Користувач починає взаємодію;
    : Користувач відкриває панель адміністратора;
|Система|
    : Система вносить у лог запис про спробу входу як адміністратор;
    : Система перевіряє формат даних;
    note right #ffaaaa
    <b> можливий виняток: DataDelete_EX_Permission –
Користувач не є адміністратором
    end note

|Користувач|
    : Адміністратор натискає кнопку "Видалення даних з таблиці";

|Система|
    : Система вносить у лог запис про спробу видалення даних;
    : Адміністратор вводить правила фільтрації даних;
    : Система перевіряє синтаксис запиту;
    note right #ffaaaa
    <b> можливий виняток: DataFilter_EX_WrongRequest–
Неправильний формат запиту
    end note

    : Система фільтрує дані та збергіє їх у буфері;
    note right #ffaaaa
    <b> можливий виняток: DataFilter_EX_NoMemory–
недостатньо ресурсів для зберігання проміжного результату
    end note

|Користувач|
    : Адміністратор отримує таблицю з записами, де може відмічати
дані котрі необхідно видалити та натискає кнопку "Видалити";

|Система|
    : Система починає процес видалення даних;

|Користувач|
    : Адміністратор повертається на панель адміністратора
та отримує progress bar фонового процесу видалення;
    : Кінець взаємодії;
    stop;
@enduml